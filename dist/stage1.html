<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <title>Stage 1</title>
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"></script>
    <script src="bundle.js"></script>
  </head>
  <body>
    <a-scene stats >
          <!-- structure de l'Ã©tage  -->
        <a-assets>
          <img id="floor" src="assets/textures/treadplate1.png" ></img>
          <img id="wall" src="assets/textures/wall.jpg" ></img>
          <img id="danger" src="assets/textures/danger.png" ></img>
          </a-assets>

          <a-plane rotation="-90 0 0" material="shader: flat; src: #floor; repeat: 4 4 ; " height="3" width="3"></a-plane>
          <a-plane position ="-1.5 1.5 0" rotation="0 90 0" material="shader: flat; src: #wall ; " height="3" width="3"></a-plane>
          <a-plane position ="+1.5 1.5 0" rotation="0 90 0" material="shader: flat; src: #wall; side:double; " height="3" width="3" ></a-plane>
          <a-plane position ="0 1.5 -1.5" rotation="0 0 90" material="shader: flat; src: #wall  ;side:double " height="3" width="3"></a-plane>
          <a-plane position ="0 1.5 1.5" rotation="0 0 90" material="shader: flat; src: #wall ;side:double " height="3" width="3"></a-plane>
          <a-plane position ="0 3 0" rotation="90 0 0" material="shader: flat; src: #wall ;side:double " height="3" width="3"></a-plane>
  
          <!-- objects  -->
          <a-assets>
            <a-asset-item id="red_button" src="assets/3d_objects/red_button/scene.gltf"></a-asset-item>
            <a-asset-item id="light" src="assets/3d_objects/light/scene.gltf"></a-asset-item>
            <a-asset-item id="radio" src="assets/3d_objects/prc_152/scene.gltf"></a-asset-item>
            <a-asset-item id="electronic_panel" src="assets/3d_objects/control_panel/scene.gltf"></a-asset-item>
            <a-asset-item id="table" src="assets/3d_objects/table/scene.gltf"></a-asset-item>
            <a-asset-item id="screwdriver" src="assets/3d_objects/screwdriver/scene.gltf"></a-asset-item>
            <a-asset-item id="pipes" src="assets/3d_objects/pipes/scene.gltf"></a-asset-item>
            <a-asset-item id="door" src="assets/3d_objects/door/scene.gltf"></a-asset-item>
            <a-asset-item id="exit" src="assets/3d_objects/exit/scene.gltf"></a-asset-item>
          </a-assets> 

          <a-plane position ="-1.49 1.5 0" rotation="0 90 0" material="shader: flat; src: #danger ; " height="0.55" width="0.4"></a-plane>
          <a-entity hover-highlighter gltf-model="#red_button" position="-1.5 1.5 0.2" scale="0.1, 0.1, 0.1" ></a-entity>
          <a-entity hover-highlighter gltf-model="#light" position="0 3 0" scale="0.01, 0.01, 0.01" rotation="90 0 0"></a-entity>
          <a-entity hover-highlighter gltf-model="#electronic_panel" position="+0.8 0.4 0" scale="0.008, 0.008, 0.008"></a-entity>
          <a-entity hover-highlighter gltf-model="#radio" position="-1.0 0.8 -1.35" scale="0.0008, 0.0008, 0.0008"></a-entity>
          <a-entity hover-highlighter gltf-model="#table" position="-1.2 -0.3 -1.2" scale="0.3, 0.3, 0.3"></a-entity>
          <a-entity hover-highlighter gltf-model="#screwdriver" position="-1.3 0.65 -1.0" scale="0.02, 0.02, 0.02" rotation ="0 -90 0"></a-entity> 
          <a-entity hover-highlighter gltf-model="#pipes" position="-1.2 2.5 -1.1" scale="0.8, 0.5, 0.8" rotation ="180 -90 0"></a-entity> 
          <a-entity hover-highlighter gltf-model="#door" position="-0.5 1.27 1.5" scale="0.16, 0.16, 0.16" rotation ="0 180 0"></a-entity>
          <a-entity hover-highlighter gltf-model="#exit" position="-0.5 2.7 1.5" scale="0.04, 0.04, 0.04" rotation ="0 180 0"></a-entity>

      <!-- lumiÃ¨re  --> 
          <a-entity light="color: #00000; intensity: 1.5;" position="0 1 0"></a-entity>


          <!-- avatar  --> 
        <a-entity id="rig"
        disable-in-vr="component: movement-controls"
        movement-controls="constrainToNavMesh: true;"
        position="0 0 3"
      >

        <a-entity id="head" position="0 1.7 0" camera look-controls="pointerLockEnabled: true">
          <a-entity
            id="eyes"
            geometry="primitive: circle; radius: 0.0005"
            material="color: black"
            position="0 0 -0.1"
            cursor
            disable-in-vr="component: geometry"
            disable-in-vr__cursor="component: cursor"
            raycaster="objects: [hover-highlighter]; far: 1.5"
          ></a-entity>
        </a-entity>

        <a-entity id="hands" position="0 0.9 0" bind-rotation="target: #head" disable-in-vr="component: bind-rotation" disable-in-vr__pos="component: position">
          <a-entity id="left-hand"
            position="-0.3 0 -0.3"
            rotation="0 0 90"
            bind-rotation="target: #head"
            disable-in-vr="component: bind-rotation"
            hand-controls="hand: left"
            teleport-controls="cameraRig: #rig; collisionEntities: #nav-mesh-spawn; button: trigger; curveShootingSpeed: 8"
          ></a-entity>
          <a-entity id="right-hand"
            position="0.3 0 -0.3"
            rotation="0 0 -90"
            bind-rotation="target: #head"
            disable-in-vr="component: bind-rotation"
            hand-controls="hand: right"
            laser-controls="hand: right"
            raycaster="far: 1.5; objects: [hover-highlighter]; showLine: true"
          ></a-entity>
        </a-entity>

      </a-entity>
      </a-scene>

  </body>
</html>